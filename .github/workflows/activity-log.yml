name: Update Activity Log

on:
  schedule:
    # æ¯å¤© 02:00 èˆ‡ 14:00 (UTC)ï¼›å°ç£æ™‚é–“ 10:00 / 22:00
    - cron: "0 2,14 * * *"
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Generate Activity Section
        uses: TheDanniCraft/activity-log@v1
        with:
          # å¿…å¡«ï¼šä½ çš„ GitHub ä½¿ç”¨è€…åç¨±ï¼ˆå°å¯«æˆ–èˆ‡å€‹äººé ä¸€è‡´ï¼‰
          GITHUB_USERNAME: chy900609
          # Token åƒæ•¸åè¦å« GITHUB_TOKENï¼›å¯ä»¥ç”¨ PATï¼ˆsecrets.TOKENï¼‰æˆ–å…§å»º token
          # è‹¥åªéœ€è¦å…¬é–‹æ´»å‹•ï¼Œé€™è¡Œä¹Ÿå¯æ”¹æˆ ${{ secrets.GITHUB_TOKEN }}
          GITHUB_TOKEN: ${{ secrets.TOKEN }}
          # å¯é¸ï¼šç”¢å‡ºå¯«åˆ°å“ªå€‹æª”æ¡ˆï¼ˆé è¨­é€šå¸¸æ˜¯ README.mdï¼›é€™è£¡æ˜ç¢ºæŒ‡å®šï¼‰
          README_PATH: README.md
          # å…¶ä»–å¯é¸åƒæ•¸ï¼ˆéœ€è¦æ‰åŠ ï¼‰
          EVENT_LIMIT: 20
          IGNORE_EVENTS: "IssueCommentEvent,PullRequestReviewCommentEvent"
          HIDE_DETAILS_ON_PRIVATE_REPOS: true
          COMMIT_MESSAGE: "chore: auto-update activity log"
          EVENT_EMOJI_MAP: |
            {
              "PushEvent":"ğŸ“",
              "PullRequestEvent":{"merged":"ğŸ”€","opened":"ğŸ“¥","closed":"âŒ"},
              "ReleaseEvent":{"published":"ğŸš€"},
              "WatchEvent":"ğŸ””",
              "StarEvent":"â­"
            }

  #    - name: Commit changes (if any)
#        run: |
    #      if [[ -n "$(git status --porcelain)" ]]; then
 #           git config user.name "github-actions[bot]"
   #         git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
#            git add README.md
#            git commit -m "chore: auto-update activity log"
 #           git push
 #         else
 #           echo "No changes."
 #         fi
